<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>abjad</title>
        <link rel="stylesheet" href="https://kvnchpl.github.io/css/main.css">
    </head>
    <body>
        <div>
            <h3>abjad</h3>
            <textarea id="userInput" rows="4" style="width: 100%;" placeholder="Type your text here..."></textarea>
            <br>
            <button id="convertButton" style="margin-top: 10px;">Convert</button>
            <p><strong>Output:</strong></p>
            <pre id="outputText" style="background: #f7f7f7; padding: 10px; border: 1px solid #ddd;"></pre>
        </div>

        <script>
            // Replace this with the actual API endpoint
            const IPA_API_URL = 'https://api.linguarobot.io/ipa/v1/convert?text=';

            // Function to remove vowels from IPA text
            function removeVowelsFromIPA(ipaText) {
                // Define IPA vowel symbols
                const vowels = /[aeiouyAEIOUYɪɨʉɯøœɤɜəɶʌɑɛæɐ]/g;
                return ipaText.replace(vowels, '').trim();
            }

            // Add event listener to the button
            document.getElementById('convertButton').addEventListener('click', async function () {
                const userInput = document.getElementById('userInput').value;

                if (userInput.trim() === '') {
                    document.getElementById('outputText').textContent = 'Please enter some text.';
                    return;
                }

                try {
                    // Fetch IPA transcription using the API
                    const response = await fetch(IPA_API_URL + encodeURIComponent(userInput));
                    const data = await response.json();

                    if (data.ipa) {
                        const ipaText = data.ipa;
                        const convertedText = removeVowelsFromIPA(ipaText);
                        document.getElementById('outputText').textContent = convertedText || '(No output)';
                    } else {
                        document.getElementById('outputText').textContent = 'IPA conversion failed.';
                    }
                } catch (error) {
                    console.error('Error fetching IPA:', error);
                    document.getElementById('outputText').textContent = 'Error fetching IPA.';
                }
            });
        </script>
    </body>
</html>